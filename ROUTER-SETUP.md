# 路由器端口映射配置指南

## 你的网络信息

- **路由器地址**: 192.168.2.1
- **你的电脑 IP**: 192.168.2.215
- **服务端口**: 8080

---

## 为什么手机无法直接访问？

### 原因分析

```
┌─────────────────────────────────────────────────────────┐
│                      你的路由器                           │
│                    192.168.2.1                           │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐ │
│  │   你的电脑   │    │   手机 A    │    │   手机 B    │ │
│  │192.168.2.215│    │192.168.2.100│    │192.168.2.101│ │
│  │  :8080      │    │             │    │             │ │
│  └─────────────┘    └─────────────┘    └─────────────┘ │
│                                                         │
│  ❌ 路由器可能启用了 AP 隔离（设备间无法互访）            │
│  ✅ 需要端口映射让外部设备访问内部服务                    │
└─────────────────────────────────────────────────────────┘
```

---

## 配置步骤

### 步骤 1：登录路由器管理界面

1. 打开浏览器，访问：http://192.168.2.1
2. 输入管理员账号密码（通常在路由器底部贴纸）
   - 常见默认账号：`admin`
   - 常见默认密码：`admin` 或空

### 步骤 2：找到端口映射/虚拟服务器设置

不同品牌路由器名称不同：

| 路由器品牌 | 功能名称 |
|-----------|---------|
| TP-Link | 转发规则 → 虚拟服务器 |
| 华硕 ASUS | 外部网络( WAN ) → 端口转发 |
| 小米 | 高级设置 → 端口转发 |
| 华为 | 更多功能 → 安全设置 → NAT 服务 |
| Tenda | 虚拟服务器 |
| 通用名称 | Port Forwarding / 端口映射 / 虚拟服务器 |

### 步骤 3：添加端口映射规则

填写以下信息：

```
服务名称: F1-Pixel-Racer
外部端口: 8080  (或任意 1024-65535 之间的数字)
内部端口: 8080
内部 IP:  192.168.2.215   ← 你的电脑IP
协议:     TCP/UDP (或 ALL/全部)
状态:     启用
```

示例配置：

```
┌─────────────────────────────────────┐
│         虚拟服务器 / 端口转发          │
├─────────────────────────────────────┤
│  服务名: F1-Pixel-Racer              │
│  外网端口: 8080                      │
│  内网IP: 192.168.2.215               │
│  内网端口: 8080                      │
│  协议: TCP/UDP                       │
│  状态: 启用 ✅                       │
└─────────────────────────────────────┘
```

### 步骤 4：保存并重启路由器

1. 点击「保存」或「应用」
2. 部分路由器需要重启才生效

---

## 步骤 5：关闭 AP 隔离（如仍无法访问）

在路由器设置中查找并关闭：

- AP 隔离 (AP Isolation)
- 客户端隔离 (Client Isolation)
- 访客网络隔离

通常在：无线设置 / WiFi 高级设置 中

---

## 步骤 6：访问网站

### 启动服务器

**方法一：双击运行脚本**
```
start-server-admin.ps1
```

**方法二：手动命令**
```powershell
# 以管理员身份运行 PowerShell
cd "Y:\软件\kimi\F1Project\F1\dist"
python -m http.server 8080
```

### 手机访问

现在手机可以通过以下地址访问：

```
http://192.168.2.215:8080
```

如果还是不行，试试：

```
http://192.168.2.1:8080   ← 通过路由器转发
```

---

## 如果仍然无法访问

### 检查清单

- [ ] 服务器已启动（PowerShell 窗口显示 "Serving HTTP on :: port 8080"）
- [ ] 路由器端口映射已保存
- [ ] 手机连接的是同一个 WiFi（不是 4G/5G）
- [ ] Windows 防火墙已放行 8080 端口
- [ ] 路由器 AP 隔离已关闭

### 替代方案：使用 Ngrok（无需路由器设置）

```bash
# 1. 下载 ngrok: https://ngrok.com/download
# 2. 解压 ngrok.exe 到项目文件夹
# 3. 运行:
ngrok http 8080

# 4. 手机访问生成的 https://xxx.ngrok.io 链接
```

---

## 路由器型号特定指南

如果你能提供路由器品牌/型号，我可以给出更具体的步骤。

常见品牌管理地址：
- TP-Link: http://192.168.1.1 或 http://tplogin.cn
- 小米: http://192.168.31.1 或 http://miwifi.com
- 华硕: http://192.168.1.1 或 http://router.asus.com
- 华为: http://192.168.3.1 或 http://192.168.2.1
- Tenda: http://192.168.0.1
